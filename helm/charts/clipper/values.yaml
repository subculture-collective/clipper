# Clipper Umbrella Chart Values
# This file contains default values for the complete Clipper stack

# Global values shared across all sub-charts
global:
  domain: clpr.tv
  environment: production

# Enable/disable components
backend:
  enabled: true

frontend:
  enabled: true

postgres:
  enabled: true

redis:
  enabled: true

# Backend service configuration
clipper-backend:
  replicaCount: 2
  image:
    repository: clipper-backend
    tag: latest
  autoscaling:
    enabled: true
    minReplicas: 2
    maxReplicas: 10
  ingress:
    enabled: true
    className: nginx
    annotations:
      cert-manager.io/cluster-issuer: "letsencrypt-prod"
    hosts:
      - host: clpr.tv
        paths:
          - path: /api
            pathType: Prefix
    tls:
      - secretName: clipper-tls
        hosts:
          - clpr.tv

# Frontend service configuration
clipper-frontend:
  replicaCount: 2
  image:
    repository: clipper-frontend
    tag: latest
  autoscaling:
    enabled: true
    minReplicas: 2
    maxReplicas: 10
  ingress:
    enabled: true
    className: nginx
    annotations:
      cert-manager.io/cluster-issuer: "letsencrypt-prod"
      nginx.ingress.kubernetes.io/ssl-redirect: "true"
    hosts:
      - host: clpr.tv
        paths:
          - path: /
            pathType: Prefix
    tls:
      - secretName: clipper-tls
        hosts:
          - clpr.tv

# PostgreSQL configuration
clipper-postgres:
  image:
    tag: pg17
  persistence:
    enabled: true
    size: 20Gi
    storageClassName: local-path
  resources:
    requests:
      cpu: 250m
      memory: 512Mi
    limits:
      cpu: 1000m
      memory: 2Gi
  config:
    database: clipper_db
    username: clipper

# Redis configuration
clipper-redis:
  image:
    tag: 7-alpine
  persistence:
    enabled: true
    size: 5Gi
    storageClassName: local-path
  resources:
    requests:
      cpu: 100m
      memory: 256Mi
    limits:
      cpu: 500m
      memory: 512Mi
