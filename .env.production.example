# Production Environment Variables
# Copy this file to .env on your production server and fill in the values
# 
# SECURITY WARNING: Never commit actual secrets to version control!
# See docs/SECRETS_MANAGEMENT.md for best practices
#
# Generate secure passwords with: openssl rand -base64 32

# ============================================================================
# Database Configuration
# ============================================================================
POSTGRES_DB=clipper_db
POSTGRES_USER=clipper
# Generate with: openssl rand -base64 32
POSTGRES_PASSWORD=CHANGEME_SECURE_PASSWORD_HERE

# Backend connection settings (Docker network)
DB_HOST=postgres
DB_PORT=5432
DB_USER=clipper
DB_PASSWORD=CHANGEME_SECURE_PASSWORD_HERE
DB_NAME=clipper_db
DB_SSLMODE=require

# ============================================================================
# Redis Configuration
# ============================================================================
REDIS_HOST=redis
REDIS_PORT=6379
# Generate with: openssl rand -base64 32
REDIS_PASSWORD=CHANGEME_SECURE_REDIS_PASSWORD
REDIS_DB=0
REDIS_MAX_MEMORY=512mb
REDIS_EVICTION_POLICY=allkeys-lru

# ============================================================================
# Application Configuration
# ============================================================================
PORT=8080
GIN_MODE=release
LOG_LEVEL=info

# ============================================================================
# JWT Configuration
# ============================================================================
# Generate RSA key pair with:
#   openssl genrsa -out private.pem 2048
#   openssl rsa -in private.pem -pubout -out public.pem
# Then copy the entire content (including -----BEGIN/END----- lines)
JWT_PRIVATE_KEY=CHANGEME_PASTE_PRIVATE_KEY_HERE
JWT_PUBLIC_KEY=CHANGEME_PASTE_PUBLIC_KEY_HERE
# Token expiration (in hours)
JWT_ACCESS_TOKEN_EXPIRY=24
JWT_REFRESH_TOKEN_EXPIRY=720

# ============================================================================
# Twitch API Configuration
# ============================================================================
# Get credentials from: https://dev.twitch.tv/console/apps
# Rotate every 90 days or immediately if compromised
# Last rotated: YYYY-MM-DD
# Next rotation: YYYY-MM-DD
TWITCH_CLIENT_ID=CHANGEME_TWITCH_CLIENT_ID
TWITCH_CLIENT_SECRET=CHANGEME_TWITCH_CLIENT_SECRET
TWITCH_REDIRECT_URI=https://clipper.example.com/api/v1/auth/twitch/callback

# ============================================================================
# CORS Configuration
# ============================================================================
# Comma-separated list of allowed origins (production URLs only)
CORS_ALLOWED_ORIGINS=https://clipper.example.com,https://www.clipper.example.com

# ============================================================================
# Cookie Security
# ============================================================================
# Session cookie configuration
COOKIE_DOMAIN=clipper.example.com
COOKIE_SECURE=true
COOKIE_HTTPONLY=true
COOKIE_SAMESITE=lax
COOKIE_MAX_AGE=86400

# ============================================================================
# Observability & Monitoring
# ============================================================================
# Sentry DSN for error tracking
# Get from: https://sentry.io/settings/projects/
SENTRY_DSN=
SENTRY_ENVIRONMENT=production
SENTRY_TRACES_SAMPLE_RATE=0.1

# OpenTelemetry configuration
OTEL_ENABLED=true
OTEL_SERVICE_NAME=clipper-backend
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4318
OTEL_TRACES_SAMPLER=parentbased_traceidratio
OTEL_TRACES_SAMPLER_ARG=0.1

# Prometheus metrics
METRICS_ENABLED=true
METRICS_PORT=9090

# ============================================================================
# Backup Configuration
# ============================================================================
BACKUP_ENABLED=true
BACKUP_RETENTION_DAYS=30
BACKUP_SCHEDULE="0 2 * * *"  # Daily at 2 AM
BACKUP_DESTINATION=/var/backups/clipper

# ============================================================================
# Rate Limiting
# ============================================================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS_PER_MINUTE=60
RATE_LIMIT_BURST=10

# ============================================================================
# Security Headers
# ============================================================================
SECURITY_HEADERS_ENABLED=true
HSTS_MAX_AGE=31536000
CSP_ENABLED=true
