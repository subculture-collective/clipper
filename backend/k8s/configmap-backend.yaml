apiVersion: v1
kind: ConfigMap
metadata:
  name: backend-config
  labels:
    app: clipper-backend
    component: config
# Non-secret configuration values
# NOTE: Keep ordering and comments aligned with .env.production.example
# Secrets are now injected at runtime via Vault (agent template -> env file).
# Do NOT store secrets in this ConfigMap or commit Kubernetes Secret manifests.
data:
  PORT: "8080"
  GIN_MODE: "release"
  BASE_URL: "https://clpr.tv"
  ENVIRONMENT: "production"
  DB_HOST: "postgres"
  DB_PORT: "5432"
  DB_USER: "clipper"
  DB_NAME: "clipper_db"
  DB_SSLMODE: "disable"
  REDIS_HOST: "redis"
  REDIS_PORT: "6379"
  REDIS_DB: "0"
  TWITCH_REDIRECT_URI: "https://clpr.tv/api/v1/auth/twitch/callback"
  CORS_ALLOWED_ORIGINS: "https://clpr.tv"
  LOG_LEVEL: "info"
  OPENSEARCH_URL: "http://opensearch:9200"
  OPENSEARCH_INSECURE_SKIP_VERIFY: "false"
  STRIPE_SUCCESS_URL: "https://clpr.tv/subscription/success"
  STRIPE_CANCEL_URL: "https://clpr.tv/subscription/cancel"
  SENTRY_ENABLED: "true"
  SENTRY_ENVIRONMENT: "production"
  SENTRY_TRACES_SAMPLE_RATE: "0.1"
  EMAIL_ENABLED: "false"
  EMAIL_FROM_ADDRESS: "noreply@clpr.tv"
  EMAIL_FROM_NAME: "Clipper"
  EMAIL_MAX_PER_HOUR: "10"
  EMBEDDING_ENABLED: "false"
  EMBEDDING_MODEL: "text-embedding-3-small"
  EMBEDDING_REQUESTS_PER_MINUTE: "500"
  EMBEDDING_SCHEDULER_INTERVAL_MINUTES: "360"
  FEATURE_SEMANTIC_SEARCH: "false"
  FEATURE_PREMIUM_SUBSCRIPTIONS: "false"
  FEATURE_EMAIL_NOTIFICATIONS: "false"
  FEATURE_PUSH_NOTIFICATIONS: "false"
  FEATURE_ANALYTICS: "true"
  FEATURE_MODERATION: "true"
  FEATURE_DISCOVERY_LISTS: "false"
  HOT_CLIPS_REFRESH_INTERVAL_MINUTES: "5"
  WEBHOOK_RETRY_INTERVAL_MINUTES: "1"
  WEBHOOK_RETRY_BATCH_SIZE: "100"
