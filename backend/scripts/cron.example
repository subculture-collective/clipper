# Clipper Targeted Clip Scraper - Cron Configuration Examples
#
# Installation:
# 1. Copy this file or add the relevant line(s) to your crontab
# 2. Update paths to match your installation directory
# 3. Ensure log directory exists: mkdir -p /var/log/clipper
# 4. Make sure the script is executable: chmod +x /opt/clipper/backend/bin/scrape_clips
#
# Edit crontab:
#   crontab -e
#
# View current crontab:
#   crontab -l

# ----------------------------------------------------------------------------
# DAILY SCRAPING (Recommended)
# ----------------------------------------------------------------------------
# Runs every day at 2:00 AM UTC
# Good for active platforms with frequent submissions
0 2 * * * cd /opt/clipper/backend && ./bin/scrape_clips >> /var/log/clipper/scraper.log 2>&1

# ----------------------------------------------------------------------------
# WEEKLY SCRAPING
# ----------------------------------------------------------------------------
# Runs every Sunday at 2:00 AM UTC with larger batch size
# Good for platforms with less frequent submissions
# 0 2 * * 0 cd /opt/clipper/backend && ./bin/scrape_clips --batch-size 100 >> /var/log/clipper/scraper.log 2>&1

# ----------------------------------------------------------------------------
# MULTIPLE TIMES PER DAY
# ----------------------------------------------------------------------------
# Runs every 6 hours
# Good for very active platforms that need frequent updates
# 0 */6 * * * cd /opt/clipper/backend && ./bin/scrape_clips >> /var/log/clipper/scraper.log 2>&1

# ----------------------------------------------------------------------------
# CUSTOM CONFIGURATION
# ----------------------------------------------------------------------------
# With custom filters and settings
# 0 2 * * * cd /opt/clipper/backend && ./bin/scrape_clips --batch-size 75 --min-views 200 --max-age-days 14 >> /var/log/clipper/scraper.log 2>&1

# ----------------------------------------------------------------------------
# SPECIFIC BROADCASTERS
# ----------------------------------------------------------------------------
# Scrape specific high-value broadcasters more frequently
# 0 */3 * * * cd /opt/clipper/backend && ./bin/scrape_clips --broadcasters "xQc,Pokimane,shroud" --batch-size 100 >> /var/log/clipper/scraper-priority.log 2>&1

# ----------------------------------------------------------------------------
# LOG ROTATION
# ----------------------------------------------------------------------------
# Rotate scraper logs weekly (add to root's crontab or use logrotate)
# 0 3 * * 0 find /var/log/clipper -name "scraper*.log" -mtime +30 -delete

# ----------------------------------------------------------------------------
# NOTES
# ----------------------------------------------------------------------------
# - All times are in UTC by default (adjust for your timezone if needed)
# - Ensure the .env file is accessible from the working directory
# - Monitor disk space for logs
# - Consider using logrotate for production deployments
# - Avoid running multiple instances simultaneously
# - Test with --dry-run first: ./bin/scrape_clips --dry-run
