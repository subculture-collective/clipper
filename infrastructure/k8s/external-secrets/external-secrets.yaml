---
# Example ExternalSecret for backend secrets (AWS Secrets Manager)
apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
  name: backend-secrets
  namespace: clipper-production
spec:
  refreshInterval: 1h
  secretStoreRef:
    name: aws-secrets-manager  # or gcp-secret-manager, vault, azure-keyvault
    kind: SecretStore
  target:
    name: backend-secrets
    creationPolicy: Owner
  data:
    - secretKey: DB_PASSWORD
      remoteRef:
        key: clipper/production/database
        property: password
    - secretKey: REDIS_PASSWORD
      remoteRef:
        key: clipper/production/redis
        property: password
    - secretKey: JWT_PRIVATE_KEY
      remoteRef:
        key: clipper/production/jwt
        property: private_key
    - secretKey: JWT_PUBLIC_KEY
      remoteRef:
        key: clipper/production/jwt
        property: public_key
    - secretKey: TWITCH_CLIENT_ID
      remoteRef:
        key: clipper/production/twitch
        property: client_id
    - secretKey: TWITCH_CLIENT_SECRET
      remoteRef:
        key: clipper/production/twitch
        property: client_secret
    - secretKey: STRIPE_SECRET_KEY
      remoteRef:
        key: clipper/production/stripe
        property: secret_key
    - secretKey: STRIPE_WEBHOOK_SECRET
      remoteRef:
        key: clipper/production/stripe
        property: webhook_secret
    - secretKey: STRIPE_PRO_MONTHLY_PRICE_ID
      remoteRef:
        key: clipper/production/stripe
        property: pro_monthly_price_id
    - secretKey: STRIPE_PRO_YEARLY_PRICE_ID
      remoteRef:
        key: clipper/production/stripe
        property: pro_yearly_price_id
    - secretKey: SENTRY_DSN
      remoteRef:
        key: clipper/production/sentry
        property: dsn
    - secretKey: SENDGRID_API_KEY
      remoteRef:
        key: clipper/production/sendgrid
        property: api_key
    - secretKey: OPENAI_API_KEY
      remoteRef:
        key: clipper/production/openai
        property: api_key
    - secretKey: OPENSEARCH_USERNAME
      remoteRef:
        key: clipper/production/opensearch
        property: username
    - secretKey: OPENSEARCH_PASSWORD
      remoteRef:
        key: clipper/production/opensearch
        property: password
---
# Example ExternalSecret for backend secrets (Staging)
apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
  name: backend-secrets
  namespace: clipper-staging
spec:
  refreshInterval: 1h
  secretStoreRef:
    name: aws-secrets-manager  # or gcp-secret-manager, vault, azure-keyvault
    kind: SecretStore
  target:
    name: backend-secrets
    creationPolicy: Owner
  data:
    - secretKey: DB_PASSWORD
      remoteRef:
        key: clipper/staging/database
        property: password
    - secretKey: REDIS_PASSWORD
      remoteRef:
        key: clipper/staging/redis
        property: password
    - secretKey: JWT_PRIVATE_KEY
      remoteRef:
        key: clipper/staging/jwt
        property: private_key
    - secretKey: JWT_PUBLIC_KEY
      remoteRef:
        key: clipper/staging/jwt
        property: public_key
    - secretKey: TWITCH_CLIENT_ID
      remoteRef:
        key: clipper/staging/twitch
        property: client_id
    - secretKey: TWITCH_CLIENT_SECRET
      remoteRef:
        key: clipper/staging/twitch
        property: client_secret
    - secretKey: STRIPE_SECRET_KEY
      remoteRef:
        key: clipper/staging/stripe
        property: secret_key
    - secretKey: STRIPE_WEBHOOK_SECRET
      remoteRef:
        key: clipper/staging/stripe
        property: webhook_secret
    - secretKey: STRIPE_PRO_MONTHLY_PRICE_ID
      remoteRef:
        key: clipper/staging/stripe
        property: pro_monthly_price_id
    - secretKey: STRIPE_PRO_YEARLY_PRICE_ID
      remoteRef:
        key: clipper/staging/stripe
        property: pro_yearly_price_id
    - secretKey: SENTRY_DSN
      remoteRef:
        key: clipper/staging/sentry
        property: dsn
    - secretKey: SENDGRID_API_KEY
      remoteRef:
        key: clipper/staging/sendgrid
        property: api_key
    - secretKey: OPENAI_API_KEY
      remoteRef:
        key: clipper/staging/openai
        property: api_key
    - secretKey: OPENSEARCH_USERNAME
      remoteRef:
        key: clipper/staging/opensearch
        property: username
    - secretKey: OPENSEARCH_PASSWORD
      remoteRef:
        key: clipper/staging/opensearch
        property: password
