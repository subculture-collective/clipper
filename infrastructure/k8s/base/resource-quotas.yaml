---
# ResourceQuota for clipper-production namespace
# Enforces resource limits to prevent exhaustion and ensure fair allocation
apiVersion: v1
kind: ResourceQuota
metadata:
  name: clipper-production-quota
  namespace: clipper-production
spec:
  hard:
    # Compute resources
    requests.cpu: "20"           # Total CPU requests across all pods
    requests.memory: "40Gi"       # Total memory requests across all pods
    limits.cpu: "40"              # Total CPU limits across all pods
    limits.memory: "80Gi"         # Total memory limits across all pods

    # Storage resources
    requests.storage: "200Gi"     # Total storage requests
    persistentvolumeclaims: "20"  # Maximum number of PVCs

    # Object counts
    pods: "100"                   # Maximum number of pods
    services: "30"                # Maximum number of services
    configmaps: "50"              # Maximum number of ConfigMaps
    secrets: "50"                 # Maximum number of Secrets

    # Load balancing
    services.loadbalancers: "5"   # Maximum number of LoadBalancer services
    services.nodeports: "5"       # Maximum number of NodePort services
---
# ResourceQuota for clipper-staging namespace
# Lower limits for staging environment
apiVersion: v1
kind: ResourceQuota
metadata:
  name: clipper-staging-quota
  namespace: clipper-staging
spec:
  hard:
    # Compute resources
    requests.cpu: "10"            # Total CPU requests across all pods
    requests.memory: "20Gi"       # Total memory requests across all pods
    limits.cpu: "20"              # Total CPU limits across all pods
    limits.memory: "40Gi"         # Total memory limits across all pods

    # Storage resources
    requests.storage: "100Gi"     # Total storage requests
    persistentvolumeclaims: "15"  # Maximum number of PVCs

    # Object counts
    pods: "50"                    # Maximum number of pods
    services: "20"                # Maximum number of services
    configmaps: "30"              # Maximum number of ConfigMaps
    secrets: "30"                 # Maximum number of Secrets

    # Load balancing
    services.loadbalancers: "3"   # Maximum number of LoadBalancer services
    services.nodeports: "3"       # Maximum number of NodePort services
---
# ResourceQuota for clipper-monitoring namespace
# Dedicated quota for monitoring infrastructure
apiVersion: v1
kind: ResourceQuota
metadata:
  name: clipper-monitoring-quota
  namespace: clipper-monitoring
spec:
  hard:
    # Compute resources
    requests.cpu: "8"             # Total CPU requests across all pods
    requests.memory: "16Gi"       # Total memory requests across all pods
    limits.cpu: "16"              # Total CPU limits across all pods
    limits.memory: "32Gi"         # Total memory limits across all pods

    # Storage resources (monitoring needs more storage)
    requests.storage: "200Gi"     # Total storage requests for metrics/logs
    persistentvolumeclaims: "10"  # Maximum number of PVCs

    # Object counts
    pods: "30"                    # Maximum number of pods
    services: "15"                # Maximum number of services
    configmaps: "30"              # Maximum number of ConfigMaps
    secrets: "20"                 # Maximum number of Secrets

    # Load balancing
    services.loadbalancers: "2"   # Maximum number of LoadBalancer services
    services.nodeports: "2"       # Maximum number of NodePort services
