# Blue/Green Deployment Environment Configuration
# Copy this file to .env and configure for your environment

# ============================================================================
# Database Configuration
# ============================================================================
POSTGRES_DB=clipper_db
POSTGRES_USER=clipper
POSTGRES_PASSWORD=your_secure_password_here

# ============================================================================
# Application Configuration
# ============================================================================
BASE_URL=https://clpr.tv
CORS_ALLOWED_ORIGINS=https://clpr.tv

# ============================================================================
# Twitch API Configuration
# ============================================================================
TWITCH_CLIENT_ID=your_twitch_client_id
TWITCH_CLIENT_SECRET=your_twitch_client_secret

# ============================================================================
# Blue/Green Deployment Configuration
# ============================================================================

# Active environment (blue or green)
# This determines which environment receives traffic
ACTIVE_ENV=blue

# Image tags for each environment
# Use 'latest' for most recent, or specific version tags (e.g., 'v1.2.3')
BACKEND_BLUE_TAG=latest
FRONTEND_BLUE_TAG=latest
BACKEND_GREEN_TAG=latest
FRONTEND_GREEN_TAG=latest

# ============================================================================
# Deployment Configuration
# ============================================================================

# Deployment directory
DEPLOY_DIR=/opt/clipper

# Docker Compose file
COMPOSE_FILE=docker-compose.blue-green.yml

# Container registry
REGISTRY=ghcr.io/subculture-collective/clipper

# ============================================================================
# Health Check Configuration
# ============================================================================

# Maximum number of health check attempts
HEALTH_CHECK_RETRIES=30

# Seconds between health check attempts
HEALTH_CHECK_INTERVAL=10

# ============================================================================
# Backup Configuration
# ============================================================================

# Directory for deployment backups
BACKUP_DIR=/opt/clipper/backups

# ============================================================================
# Monitoring Configuration
# ============================================================================

# Enable deployment monitoring and notifications
MONITORING_ENABLED=false

# Webhook URL for deployment notifications (Slack, Discord, etc.)
# Example for Slack: https://hooks.slack.com/services/YOUR/WEBHOOK/URL
WEBHOOK_URL=

# ============================================================================
# Notes
# ============================================================================
#
# Blue/Green Deployment Process:
# 1. Set environment variables in this file
# 2. Run: ./scripts/blue-green-deploy.sh
# 3. Monitor deployment progress
# 4. Verify new environment health
# 5. Traffic switches automatically
# 6. Old environment is stopped
#
# Rollback:
# If deployment fails or issues occur after deployment:
# - Automatic rollback on health check failure
# - Manual rollback: ./scripts/rollback-blue-green.sh
#
# Environment Variables Priority:
# 1. Environment variables set in shell
# 2. Variables in this .env file
# 3. Default values in docker-compose.yml
#
# Security:
# - Never commit this file with real credentials
# - Use strong passwords for production
# - Rotate credentials regularly
# - Consider using a secrets manager for production
